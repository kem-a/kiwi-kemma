/* Firefox Window Controls Theming (Kiwi - default set) */
@namespace xul "http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul";

/* Ensure the button box aligns items centrally like other toolbar icons */
#nav-bar .titlebar-buttonbox-container,
#titlebar .titlebar-buttonbox-container,
#nav-bar .titlebar-buttonbox,
#titlebar .titlebar-buttonbox {
  display: flex !important;
  align-items: center !important;
  gap: 11px !important;
}

/* Add a small left margin to the outer container only for nav-bar layout */
#nav-bar .titlebar-buttonbox-container {
  margin-left: 19px !important;
}

/* When tabs are in the titlebar (horizontal tabs), prefer the copy inside the TabsToolbar */
/* First hide all copies... */
:root[tabsintitlebar] .titlebar-buttonbox-container,
:root[tabsintitlebar] .titlebar-buttonbox {
  display: none !important;
}
/* ...then explicitly show only the TabsToolbar copy */
:root[tabsintitlebar] #TabsToolbar .titlebar-buttonbox-container,
:root[tabsintitlebar] #TabsToolbar .titlebar-buttonbox {
  display: flex !important;
}

/* When native titlebar is enabled (tabs in titlebar = false), hide Firefox UI copies to avoid duplicates */
:root:not([tabsintitlebar]) .titlebar-buttonbox-container,
:root:not([tabsintitlebar]) .titlebar-buttonbox {
  display: none !important;
}

/* Add matching left padding for the TabsToolbar copy when used */
:root[tabsintitlebar] #TabsToolbar .titlebar-buttonbox-container {
  margin-left: 12px !important;
}

/* Reset native look and hide built-in icons to avoid double rendering */
#nav-bar .titlebar-button,
#titlebar .titlebar-button {
  appearance: none !important;
  -moz-appearance: none !important;
  background: none !important;
  border: 0 !important;
  box-shadow: none !important;
  list-style-image: none !important;
  width: 16px !important;
  height: 16px !important;
  padding: 0 !important;
  margin: 0 !important;
  display: inline-block !important;
  vertical-align: middle !important;
}
#nav-bar .titlebar-button .toolbarbutton-icon,
#titlebar .titlebar-button .toolbarbutton-icon {
  display: none !important;
}

/* Base images */
#nav-bar .titlebar-close,
#titlebar .titlebar-close,
#titlebar #titlebar-close {
  background: url("titlebuttons/button-close.svg") no-repeat center center !important;
  background-size: 16px 16px !important;
}
#nav-bar .titlebar-max,
#titlebar .titlebar-max,
#titlebar #titlebar-max {
  background: url("titlebuttons/button-maximize.svg") no-repeat center center !important;
  background-size: 16px 16px !important;
}
#nav-bar .titlebar-min,
#titlebar .titlebar-min,
#titlebar #titlebar-min {
  background: url("titlebuttons/button-minimize.svg") no-repeat center center !important;
  background-size: 16px 16px !important;
}
#nav-bar .titlebar-restore,
#titlebar .titlebar-restore,
#titlebar #titlebar-restore,
:root[sizemode="maximized"] #nav-bar .titlebar-max,
:root[sizemode="maximized"] #titlebar .titlebar-max,
:root[sizemode="maximized"] #titlebar #titlebar-max {
  background: url("titlebuttons/button-restore.svg") no-repeat center center !important;
  background-size: 16px 16px !important;
}

/* Only show restore when maximized; hide maximize then */
#nav-bar .titlebar-restore,
#titlebar .titlebar-restore,
#titlebar #titlebar-restore { display: none !important; }

:root[sizemode="maximized"] #nav-bar .titlebar-restore,
:root[sizemode="maximized"] #titlebar .titlebar-restore,
:root[sizemode="maximized"] #titlebar #titlebar-restore { display: inline-block !important; }

:root[sizemode="maximized"] #nav-bar .titlebar-max,
:root[sizemode="maximized"] #titlebar .titlebar-max,
:root[sizemode="maximized"] #titlebar #titlebar-max { display: none !important; }

/* Per-button hover */
#nav-bar .titlebar-close:hover,
#titlebar .titlebar-close:hover,
#titlebar #titlebar-close:hover {
  background: url("titlebuttons/button-close-hover.svg") no-repeat center center !important;
  background-size: 16px 16px !important;
}
#nav-bar .titlebar-max:hover,
#titlebar .titlebar-max:hover,
#titlebar #titlebar-max:hover {
  background: url("titlebuttons/button-maximize-hover.svg") no-repeat center center !important;
  background-size: 16px 16px !important;
}
#nav-bar .titlebar-min:hover,
#titlebar .titlebar-min:hover,
#titlebar #titlebar-min:hover {
  background: url("titlebuttons/button-minimize-hover.svg") no-repeat center center !important;
  background-size: 16px 16px !important;
}
#nav-bar .titlebar-restore:hover,
#titlebar .titlebar-restore:hover,
#titlebar #titlebar-restore:hover,
:root[sizemode="maximized"] #nav-bar .titlebar-max:hover,
:root[sizemode="maximized"] #titlebar .titlebar-max:hover,
:root[sizemode="maximized"] #titlebar #titlebar-max:hover {
  background: url("titlebuttons/button-restore-hover.svg") no-repeat center center !important;
  background-size: 16px 16px !important;
}

/* Group hover (hovering any button hovers them all) */
#nav-bar .titlebar-buttonbox-container:hover .titlebar-close,
#titlebar .titlebar-buttonbox-container:hover .titlebar-close,
#nav-bar .titlebar-buttonbox:hover .titlebar-close,
#titlebar .titlebar-buttonbox:hover .titlebar-close {
  background: url("titlebuttons/button-close-hover.svg") no-repeat center center !important;
  background-size: 16px 16px !important;
}
#nav-bar .titlebar-buttonbox-container:hover .titlebar-min,
#titlebar .titlebar-buttonbox-container:hover .titlebar-min,
#nav-bar .titlebar-buttonbox:hover .titlebar-min,
#titlebar .titlebar-buttonbox:hover .titlebar-min {
  background: url("titlebuttons/button-minimize-hover.svg") no-repeat center center !important;
  background-size: 16px 16px !important;
}
#nav-bar .titlebar-buttonbox-container:hover .titlebar-max,
#titlebar .titlebar-buttonbox-container:hover .titlebar-max,
#nav-bar .titlebar-buttonbox:hover .titlebar-max,
#titlebar .titlebar-buttonbox:hover .titlebar-max {
  background: url("titlebuttons/button-maximize-hover.svg") no-repeat center center !important;
  background-size: 16px 16px !important;
}
#nav-bar .titlebar-buttonbox-container:hover .titlebar-restore,
#titlebar .titlebar-buttonbox-container:hover .titlebar-restore,
#nav-bar .titlebar-buttonbox:hover .titlebar-restore,
#titlebar .titlebar-buttonbox:hover .titlebar-restore,
:root[sizemode="maximized"] #nav-bar .titlebar-buttonbox-container:hover .titlebar-max,
:root[sizemode="maximized"] #titlebar .titlebar-buttonbox-container:hover .titlebar-max,
:root[sizemode="maximized"] #nav-bar .titlebar-buttonbox:hover .titlebar-max,
:root[sizemode="maximized"] #titlebar .titlebar-buttonbox:hover .titlebar-max {
  background: url("titlebuttons/button-restore-hover.svg") no-repeat center center !important;
  background-size: 16px 16px !important;
}

/* Pressed (active) state overrides - ensure visible feedback when clicking */
#nav-bar .titlebar-close:active,
#titlebar .titlebar-close:active,
#TabsToolbar .titlebar-close:active,
#titlebar #titlebar-close:active {
  background: url("titlebuttons/button-close-active.svg") no-repeat center center !important;
  background-size: 16px 16px !important;
}
#nav-bar .titlebar-buttonbox-container:hover .titlebar-close:active,
#titlebar .titlebar-buttonbox-container:hover .titlebar-close:active,
#nav-bar .titlebar-buttonbox:hover .titlebar-close:active,
#titlebar .titlebar-buttonbox:hover .titlebar-close:active,
#TabsToolbar .titlebar-buttonbox-container:hover .titlebar-close:active,
#TabsToolbar .titlebar-buttonbox:hover .titlebar-close:active {
  background: url("titlebuttons/button-close-active.svg") no-repeat center center !important;
  background-size: 16px 16px !important;
}
#nav-bar .titlebar-min:active,
#titlebar .titlebar-min:active,
#TabsToolbar .titlebar-min:active,
#titlebar #titlebar-min:active {
  background: url("titlebuttons/button-minimize-active.svg") no-repeat center center !important;
  background-size: 16px 16px !important;
}
#nav-bar .titlebar-buttonbox-container:hover .titlebar-min:active,
#titlebar .titlebar-buttonbox-container:hover .titlebar-min:active,
#nav-bar .titlebar-buttonbox:hover .titlebar-min:active,
#titlebar .titlebar-buttonbox:hover .titlebar-min:active,
#TabsToolbar .titlebar-buttonbox-container:hover .titlebar-min:active,
#TabsToolbar .titlebar-buttonbox:hover .titlebar-min:active {
  background: url("titlebuttons/button-minimize-active.svg") no-repeat center center !important;
  background-size: 16px 16px !important;
}
#nav-bar .titlebar-max:active,
#titlebar .titlebar-max:active,
#TabsToolbar .titlebar-max:active,
#titlebar #titlebar-max:active {
  background: url("titlebuttons/button-maximize-active.svg") no-repeat center center !important;
  background-size: 16px 16px !important;
}
#nav-bar .titlebar-buttonbox-container:hover .titlebar-max:active,
#titlebar .titlebar-buttonbox-container:hover .titlebar-max:active,
#nav-bar .titlebar-buttonbox:hover .titlebar-max:active,
#titlebar .titlebar-buttonbox:hover .titlebar-max:active,
#TabsToolbar .titlebar-buttonbox-container:hover .titlebar-max:active,
#TabsToolbar .titlebar-buttonbox:hover .titlebar-max:active {
  background: url("titlebuttons/button-maximize-active.svg") no-repeat center center !important;
  background-size: 16px 16px !important;
}
#nav-bar .titlebar-restore:active,
#titlebar .titlebar-restore:active,
#TabsToolbar .titlebar-restore:active,
#titlebar #titlebar-restore:active,
:root[sizemode="maximized"] #nav-bar .titlebar-max:active,
:root[sizemode="maximized"] #titlebar .titlebar-max:active,
:root[sizemode="maximized"] #nav-bar .titlebar-buttonbox .titlebar-max:active,
:root[sizemode="maximized"] #titlebar .titlebar-buttonbox .titlebar-max:active {
  background: url("titlebuttons/button-restore-active.svg") no-repeat center center !important;
  background-size: 16px 16px !important;
}
:root[sizemode="maximized"] #nav-bar .titlebar-buttonbox-container:hover .titlebar-max:active,
:root[sizemode="maximized"] #titlebar .titlebar-buttonbox-container:hover .titlebar-max:active,
:root[sizemode="maximized"] #nav-bar .titlebar-buttonbox:hover .titlebar-max:active,
:root[sizemode="maximized"] #titlebar .titlebar-buttonbox:hover .titlebar-max:active,
:root[tabsintitlebar][sizemode="maximized"] #TabsToolbar .titlebar-buttonbox-container:hover .titlebar-max:active,
:root[tabsintitlebar][sizemode="maximized"] #TabsToolbar .titlebar-buttonbox:hover .titlebar-max:active,
#nav-bar .titlebar-buttonbox-container:hover .titlebar-restore:active,
#titlebar .titlebar-buttonbox-container:hover .titlebar-restore:active,
#nav-bar .titlebar-buttonbox:hover .titlebar-restore:active,
#titlebar .titlebar-buttonbox:hover .titlebar-restore:active,
#TabsToolbar .titlebar-buttonbox-container:hover .titlebar-restore:active,
#TabsToolbar .titlebar-buttonbox:hover .titlebar-restore:active {
  background: url("titlebuttons/button-restore-active.svg") no-repeat center center !important;
  background-size: 16px 16px !important;
}
